# China-Gazetteer-Project-at-Harvard-University
In Harvard Yenching Library, we have roughly 3,500 Chinese county books which record all the agriculture, demography, education data and there are over 1,000 variables in total that are related to the historical changes of these 3,500 counties in China from 1949 to 1990. Everyday our project would receive 50 excel files that contain all the agriculture, demography and education data from 50 county books. As the chief data analyst, my job is to check data errors and then correct them before inputting the data into database because during the digitization process many errors would pop up that result in unusable data. 

In the Python code, I encapsulate the entire code into a module, so every time we want to use a specific function, we can simply call it. In the process of data error checking, (1) I first input the excel file, (2) I check the data type error by calling the check_type_print function. This function would output the error such as "6..50” so I can correct the data error, (3) I check missing unit error by calling the check_missing_unit. This function can help us track down which variables have no units, (4) I plot all the data with year in x-axis and variables in y-axis to detect outliers by calling plot_all function. If I find outlier, I show all the data in the county that has outliers and this helps me see which piece of data is abnormal, (5) in the end, I correct the outliers and output the excel file.

As I mentioned in "Data Error Checking in Python", if we found a piece of data that only has numeric value but does not have units, what should we do about then? It's very hard to tell what unit should be add to the blank. Suppose you are given a piece of data of apple amount in 6,000. You never know whether it is supposed to be 6,000 tons of 6,000 kilograms. 

In the R code, I write a function called compareNearby which compares the unit missing county with other 5 to 10 nearby counties. My assumption is that all these counties share the same productivity. Therefore, if I see one nearby county that has the apple amount of 2,000 to 10,000 kilograms from 1949 to 1990, then I know the unit missing county with apple amount of 6,000 should have 6,000 kilograms apple. After adding all the missing unit in the blank by compareNearby function, I unify all the units from "pounds", "kilograms", "tons" to "kilograms" and convert the data to "kilogram" magnitude accordingly. Last, I called the compareNearby function again and this time I output the scatter plot of the unit missing county and other 5 nearby counties. If I am right about adding units to the unit missing counties, I should see the same data magnitude of all the 6 counties. If not, I should go back to the original data to further check if I am wrong about adding units.

After running Data Error Checking in Python and Data Cleaning in R, it returns a dataset that has no data type error, no outliers and all the units are accurately added to the variables. However, units are different and the numeric value are in different scale as well. For example, for a specific variable “crops amount”, we have 10,000 pounds for Liwu county in 1965 while we have 100 tons for Liyun county in 1985. Different units should be unified into one and accordingly their numeric value should be converted to the same scale. In this code, I divided all the units into 9 categories: Area, Amount, Output Value, Percentage, Engine Power, Person, Area Per Person, Car and Animal. Then, I unified all the units in each category one by one. In the final step of unit unification, I print out all the units of the variables within category to further examine its accuracy. Finally, I output the dataset and now I have a clear and usable dataset which can be used to conduct further analysis on Chinese policy.
